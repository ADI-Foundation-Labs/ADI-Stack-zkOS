[package]
name = "rig"
version.workspace = true
edition.workspace = true
authors.workspace = true
homepage.workspace = true
repository.workspace = true
license.workspace = true
keywords.workspace = true
categories.workspace = true

[dependencies]
basic_bootloader = { path = "../../basic_bootloader" }
basic_system = { path = "../../basic_system" }
evm_interpreter = { path = "../../evm_interpreter" }
forward_system = { path = "../../forward_system" }
oracle_provider = { path = "../../oracle_provider" }
callable_oracles = { path = "../../callable_oracles/" }
zk_ee = { path = "../../zk_ee" }
zksync_os_runner = { path = "../../zksync_os_runner"}
system_hooks = { path = "../../system_hooks"}
crypto = { path = "../../crypto" }
cycle_marker = { path = "../../cycle_marker", optional = true }
zksync_os_api = { path = "../../api" }

risc_v_simulator = { workspace = true, features = ["delegation"] }
prover_examples = { workspace = true, optional = true }
trace_and_split = { workspace = true, optional = true }
execution_utils = { workspace = true, optional = true }

alloy = { version = "=1.0.32", features = ["rlp", "full"] }
alloy-primitives = { version = "1", features = ["arbitrary"] }
alloy-rpc-types-debug = { version = "*", default-features = false }
alloy-rlp = { version = "*" }

ethers = "2.0.0" # ethers 2.0.0 is required due to dependency conflict TODO: replace with alloy
futures = "0.3.30"
hex = "*"
ruint = { workspace = true, default-features = false }
tokio = { version = "1.40.0", features = ["rt-multi-thread"] }
env_logger = "0.11.6"
log = "0.4.22" # tokio with `rt-multi-thread` feature needed to build ethers 2.0.0
zksync-web3-rs = { git = "https://github.com/lambdaclass/zksync-web3-rs.git" }
bincode = "1.3"

[features]
opcode_stats = ["risc_v_simulator/opcode_stats"]
testing = ["risc_v_simulator/delegation"]
e2e_proving = ["prover_examples", "risc_v_simulator/delegation"]
default = ["testing", "evm-compatibility"]
no_print = ["forward_system/no_print"]
cycle_marker = ["dep:cycle_marker", "zksync_os_runner/cycle_marker", "zk_ee/cycle_marker", "evm_interpreter/cycle_marker", "basic_system/cycle_marker", "basic_bootloader/cycle_marker"]
simulate_witness_gen = []
unlimited_native = ["forward_system/unlimited_native"]
resources_for_tester = ["basic_bootloader/resources_for_tester"]
p256_precompile = ["system_hooks/p256_precompile"]
disable_system_contracts = ["forward_system/disable_system_contracts"]
prevrandao = ["zk_ee/prevrandao"]
evm_refunds = ["forward_system/evm_refunds"]
pectra = ["forward_system/pectra"]
evm-compatibility = ["forward_system/evm-compatibility"]